
<section class="featured-products container" id="all-products">
  <div class="featured-products__list">
    {% for product in products %}
      <div class="featured-products__item{% if product.id > 4 %}--hidden{% endif %}" data-product-card>
        {% render 'products/products-cards', product: product %}
      </div>
    {% endfor %}

  </div>
  <div class="featured-products__more-button">
    <button type="button" data-view-more>view all</button>
  </div>
</section>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const toggleButton = document.querySelector('[data-view-more]');
  const cards = Array.from(document.querySelectorAll('[data-product-card]'));
  let isExpanded = false;

  if (toggleButton) {
    toggleButton.addEventListener('click', () => {
      // Cambia el estado antes de aplicar las clases
      isExpanded = !isExpanded;

      cards.forEach((card, idx) => {
        if (idx > 3) {
          card.classList.toggle('featured-products__item', isExpanded);
          card.classList.toggle('featured-products__item--hidden', !isExpanded);
        }
      });

      // Actualiza el texto del botón según el estado
      toggleButton.textContent = isExpanded ? 'view less' : 'view all';
    });
  }
});

</script>
